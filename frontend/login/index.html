<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Login - FLiq</title>
    <link href="https://fonts.googleapis.com/css2?family=Inter:ital,opsz,wght@0,14..32,100..900;1,14..32,100..900&display=swap" rel="stylesheet">
    <link href="https://use.fontawesome.com/releases/v6.6.0/css/all.css" rel="stylesheet">
    <link rel="stylesheet" href="style.css">
</head>
<body>
    <!-- weiÃŸ noch nicht ob ich das mache
    <div class="floating-box box1"></div>
    <div class="floating-box box2"></div>
    <div class="floating-box box3"></div>
    -->

    <div class="header">
        <img class="logo" src="../img/fliq-logo.png" onclick="home()">
        <button class="sign-up-btn" onclick="signUp()">Sign Up</button>
    </div>
    <div class="login-card">
        <status class="status-msg" id="statusMsg">An error occured</status>
        <h2>Login</h2>
        <div class="seperator"></div>
        <form class="login-form">
            <input type="text" placeholder="username" id="username">
            <input type="password" placeholder="Password" id="password">
            <button type="button" class="login-btn" onclick="login()">Login</button>
        </form>
        <p>Forgot password? <a href="forgot-password/">Click Here</a></p>
        <p>Don't have an account? <a href="../register/">Click Here</a></p>
    </div>
</body>
<script src="script.js"></script>
<script>
    async function checkLogin() {
        const token = localStorage.getItem("token");

        if (token) {
            const res = await fetch("http://localhost:3000/checkLogin", {
                method: "POST",
                headers: {
                    Authorization: "Bearer " + token
                }
            });

            const data = await res.json();


            if (data.valid) {
                window.location.href = "../";
            }
        }
    }

    checkLogin();
</script>
</html>